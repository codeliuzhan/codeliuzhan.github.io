<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Oracle第三天, Blog From Liuzhan">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Oracle第三天 | Blog From Liuzhan</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Blog From Liuzhan" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Blog From Liuzhan</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Blog From Liuzhan</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/10.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Oracle第三天</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/">
                                <span class="chip bg-color">大数据第一阶段</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="post-category">
                                大数据
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-04-20
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-04-20
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    3.3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    13 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="2021-04-20-Oracle第三天"><a href="#2021-04-20-Oracle第三天" class="headerlink" title="2021/04/20 Oracle第三天"></a>2021/04/20 Oracle第三天</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>2021年4月20日，周二，今天的学习内容相对于昨天来说要简单一些，主要涉及的内容有：排序查询 ORDER BY，升序ASC,降序DESC，函数NVL，聚合函数等</p>
<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><p>语法：</p>
<pre class=" language-shell"><code class="language-shell">SELECT COL_LIST FROM TB_NAME WHERE COL_LIST  ORDER  BY ODR_CONDITION [ASC|DESC];
</code></pre>
<p>语法解释：</p>
<p>对于从TB_NAME中查出的COL_LIST数据按照规则ODR_CONDITION进行排序</p>
<h4 id="Asc关键字可以省略；"><a href="#Asc关键字可以省略；" class="headerlink" title="Asc关键字可以省略；"></a>Asc关键字可以省略；</h4><h4 id="执行顺序："><a href="#执行顺序：" class="headerlink" title="执行顺序："></a>执行顺序：</h4><p>FROM – WHERE–SELECT—ORDER  BY  </p>
<p>分类：</p>
<ol>
<li>按排序规则</li>
</ol>
<ul>
<li>升序、降序、同升同降、升降混合（两个以上排序依据，中间用英文逗号隔开）</li>
</ul>
<ol start="2">
<li>按排序内容</li>
</ol>
<ul>
<li>原字段</li>
<li>表达式（函数、计算）</li>
<li>代号（字段别名、字段序号）</li>
</ul>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ul>
<li>排序时可跟多个字段（多个排序规则）</li>
<li>排序时，按照从左向右的规则进行排序</li>
<li>升序ASC关键词可以省略不写</li>
<li>每一个升降序关键词写在各自的字段后边</li>
<li>可以按照查询结果中未出现过的字段进行排序</li>
</ul>
<p>排序查询练习题：</p>
<p>1.查询员工姓名、岗位及薪资，并将查询结果按薪资升序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL FROM EMP ORDER BY SAL ASC;
</code></pre>
<p>2.查询员工姓名、岗位、薪资及入职日期，并将结果按照入职日期降序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL,HIREDATE FROM EMP ORDER BY HIREDATE DESC;
</code></pre>
<p>2.2查询员工姓名、岗位、薪资，并将结果按照入职日期降序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL FROM EMP ORDER BY HIREDATE DESC;
</code></pre>
<p>3..查询员工信息，将查询结果按部门编号降序排列,部门编号相同,按员工编号降序</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY DEPTNO DESC,EMPNO DESC;
</code></pre>
<p>4.查询员工信息，排序：部门升序，薪资降序，员工编号升序</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY DEPTNO ASC,SAL DESC,EMPNO ASC;
</code></pre>
<p>5.查询员工信息，并将查询结果按部门编号升序排列，部门编号相同，则按薪资升序排列，薪资相同，按照员工编号升序</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY DEPTNO ASC,SAL ASC,EMPNO ASC;
</code></pre>
<h2 id="扩展NULLS"><a href="#扩展NULLS" class="headerlink" title="扩展NULLS"></a>扩展NULLS</h2><h4 id="NULL值的默认排序与强制排序"><a href="#NULL值的默认排序与强制排序" class="headerlink" title="NULL值的默认排序与强制排序"></a>NULL值的默认排序与强制排序</h4><p>NULL值默认排序为极大值，即升序排列时，空值排在最后，降序排列时，空值排在最前</p>
<ul>
<li>强制空值排在最前：NULLS  FIRST</li>
<li>强制空值排在最后：NULLS  LAST</li>
</ul>
<h2 id="扩展NVL"><a href="#扩展NVL" class="headerlink" title="扩展NVL"></a>扩展NVL</h2><h3 id="例"><a href="#例" class="headerlink" title="例:"></a>例:</h3><p>查询员工姓名、薪资、奖金、薪资奖金合计,并按照薪资奖金合计值降序排列</p>
<p>函数NVL(COL_NAME,DEFAULT_VALUE)： 将参数一中的null替换为参数二所设置的值</p>
<h3 id="注："><a href="#注：" class="headerlink" title="注："></a>注：</h3><ol>
<li>任何值与空值相计算，得到的结果都为空</li>
<li>NVL()函数中的默认值，要与第一个参数的数据类型相统一</li>
<li>NVL()函数只针对空值，非空值不会做任何处理</li>
</ol>
<hr>
<h2 id="两个扩展函数及排序练习题"><a href="#两个扩展函数及排序练习题" class="headerlink" title="两个扩展函数及排序练习题"></a>两个扩展函数及排序练习题</h2><p>6.查询员工信息，将查询结果按部门编号降序排列，若部门编号相同，则按员工编号降序</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY DEPTNO DESC,EMPNO DESC;
</code></pre>
<p>7.查询员工信息，并将查询结果按部门编号升序排列，同部门的按薪资降序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY DEPTNO ASC,SAL DESC;
</code></pre>
<p>8.查询员工姓名、薪资及部门编号，并将查询结果按部门编号升序排列，同部门的按姓名升序排列（区分大小写）</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,SAL,DEPTNO FROM EMP ORDER BY DEPTNO ASC,ENAME ASC;
</code></pre>
<p>9.查询员工姓名、薪资及部门编号，并将查询结果按部门编号升序排列，同部门的按姓名升序排列（不分大小写）</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,SAL,DEPTNO FROM EMP ORDER BY DEPTNO ASC,LOWER(ENAME) ASC;
</code></pre>
<p>10.查询员工信息及年薪，将查询结果按照年薪降序显示</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMP.*,SAL*12 AS 年薪 FROM EMP ORDER BY 年薪 DESC;
</code></pre>
<p>11.查询86年以前入职的姓名，岗位，薪资，部门，将查询结果按照部门升序，岗位降序，姓名升序</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL,DEPTNO,HIREDATE FROM EMP WHERE HIREDATE < 

TO_DATE('19860101','YYYYMMDD') ORDER BY DEPTNO ASC,JOB DESC,ENAME ASC; 
</code></pre>
<p>12.查询员工所有信息，并将查询结果按奖金升序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY COMM ASC;
</code></pre>
<p>查询员工所有信息，并将查询结果按领导编号降序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY MGR DESC;
</code></pre>
<p>查询员工所有信息，按佣金升序排列，NULL指定排在最前</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY COMM NULLS FIRST;
</code></pre>
<p>查询员工所有信息，按佣金降序排列，NULL指定排在最后</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY COMM NULLS LAST;
</code></pre>
<p>查询员工姓名、薪资、奖金、薪资奖金合计,并按照薪资奖金合计值降序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,SAL,COMM,NVL(COMM,0),SAL+COMM AS 合计 FROM EMP ORDER BY 合计 DESC;
</code></pre>
<hr>
<h3 id="两个扩展函数的练习题"><a href="#两个扩展函数的练习题" class="headerlink" title="两个扩展函数的练习题"></a>两个扩展函数的练习题</h3><p>1、查询员工姓名、岗位、薪资及奖金，若奖金为空，则显示为”CLERK”</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL,COMM,NVL(COMM,'CLERK') FROM EMP; 
</code></pre>
<p>2、查询员工姓名、入职日期，若入职日期为空，则显示为2020-5-1；</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP FOR UPDATE;
SELECT ENAME,HIREDATE,NVL(HIREDATE,TO_DATE('20200501','YYYYMMDD')) FROM EMP;
</code></pre>
<p>3、查询员工信息，将所有人奖金增加1000元</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMP.*,NVL(COMM,0) + 1000 FROM EMP; 
</code></pre>
<p>4、查询员工信息，将非销售人员加100奖金</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMP.*,NVL(COMM,0) + 100 FROM EMP WHERE JOB != 'SALESMAN';
</code></pre>
<h2 id="分组查询-聚合函数"><a href="#分组查询-聚合函数" class="headerlink" title="分组查询-聚合函数"></a>分组查询-聚合函数</h2><h3 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h3><p>把分散的数据按某种规则将数据分成不同的组、或所有数据整体作为一个组，对组级别的数据进行统计计算，每组得到一个返回值。</p>
<h3 id="五个聚合函数："><a href="#五个聚合函数：" class="headerlink" title="五个聚合函数："></a>五个聚合函数：</h3><pre class=" language-shell"><code class="language-shell">SUM():求合计值          AVG():求平均值
MAX():求最大值          MIN():求最小值
COUNT():计数
</code></pre>
<p>思考：哪些聚合函数可能出现空值，哪些聚合函数不可能出现空值</p>
<h2 id="扩展CASE-WHEN-函数"><a href="#扩展CASE-WHEN-函数" class="headerlink" title="扩展CASE WHEN 函数"></a>扩展CASE WHEN 函数</h2><p>拓展：</p>
<pre class=" language-shell"><code class="language-shell">CASE WHEN 用法:
CASE WHEN CONDITION1 THEN RESULT1
          WHEN CONDITION2 THEN RESULT2
     ...
             ELSE DEFAULT_RESULT
 END 
</code></pre>
<p>注意事项：</p>
<ol>
<li>后边的判断条件被启用的前提是，前边的条件不符合</li>
<li>如果不符合任何一个条件（包含ELSE），得到的返回值是空</li>
<li>CASE WHEN 语句得到的是一列字段</li>
<li>判断后续条件成立与否时，默认前边的条件不成立（与前边条件对立的条件成立）</li>
<li>返回值可以与条件中的字段数据类型不同，</li>
<li>所有的返回值必须类型统一</li>
</ol>
<h3 id="今日练习："><a href="#今日练习：" class="headerlink" title="今日练习："></a>今日练习：</h3><p>查询员工信息及佣金情况（有佣金的展示佣金，没有佣金的展示为：无佣金）</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMP.*,CASE WHEN COMM IS NOT NULL THEN TO_CHAR(COMM)
                  WHEN COMM IS NULL THEN '无佣金' 
                  END AS 佣金情况
FROM EMP;
</code></pre>
<p>查询员工姓名、岗位、薪资及薪资等级<br>      (等级一：700-1200；等级二：1201-1400；等级三：1401-2000；<br>      等级四：2001-3000；等级五：3001-9999）</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL,CASE WHEN SAL BETWEEN 700 AND 1200 THEN '等级一'
                          WHEN SAL BETWEEN 1201 AND 1400 THEN '等级二'
                          WHEN SAL BETWEEN 1401 AND 2000 THEN '等级三'
                          WHEN SAL BETWEEN 2001 AND 3000 THEN '等级四'
                          WHEN SAL BETWEEN 3001 AND 9999 THEN '等级五'
                          END  薪资等级
  FROM EMP;
</code></pre>
<p>查询员工信息及部门名称 DNAME（如果部门是10号，返回ACCOUNTING；如果部门是20号，返回RESEARCH；如果部门是30号，返回SALES）</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMP.*,CASE WHEN DEPTNO = 10 THEN 'ACCOUNTING'
                        WHEN DEPTNO = 20 THEN 'RESEARCH'
                        WHEN DEPTNO = 30 THEN 'SALES'
                        END AS 部门名称
FROM EMP;            


SELECT * FROM DEPT;
SELECT * FROM EMP;
</code></pre>
<p>例：查询员工姓名、岗位及岗位类型<br> （行政岗：办事员；管理岗：经理/总经理；技术岗：分析师；销售岗：销售）</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,CASE WHEN JOB = 'CLERK' THEN '行政岗'
                       WHEN JOB = 'MANAGER' OR JOB = 'PRESIDENT' THEN '管理岗'
                       WHEN JOB = 'ANALYST' THEN '技术岗'
                       WHEN JOB = 'SALESMAN' THEN '销售'
                       end  岗位类型
 from emp; 
</code></pre>
<p>1.查询员工所有信息，并将查询结果按奖金升序排列（空值放在最前边）</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY COMM ASC NULLS FIRST;
</code></pre>
<p>2.查询员工所有信息，并将查询结果按领导编号降序排列（空值放在最后边）</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY MGR DESC NULLS LAST;
</code></pre>
<p>3.查询员工姓名、岗位、薪资及奖金，若奖金为空，则显示为0</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL,COMM,NVL(COMM,0) AS 奖金 FROM EMP;
</code></pre>
<p>4.查询员工姓名、岗位、薪资及奖金情况（500以下为低奖金，500及以上为高奖金，0或空为无奖金）</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL,COMM,CASE WHEN COMM < 500 AND COMM != 0 THEN '低奖金'
                               WHEN COMM >= 500 THEN '高奖金'
                               WHEN COMM IN(0,NULL) THEN '无奖金'
                               END AS 奖金情况
  FROM EMP;               
</code></pre>
<p>5.查询每个员工的姓名、薪资(有空值）、奖金（有空值），以及薪资奖金合计、、</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP;
SELECT ENAME,SAL,COMM,NVL(SAL,0) + NVL(COMM,0) AS 合计 FROM EMP;
</code></pre>
<p>6.给每个员工加薪100，然后按照加薪后的薪资升序排序</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMP.*,SAL+100 AS 加薪 FROM EMP  ORDER BY SAL ASC;
</code></pre>
<h2 id="综合练习题"><a href="#综合练习题" class="headerlink" title="综合练习题"></a>综合练习题</h2><p>1.查询20号部门员工编号、姓名、薪资，按薪资升序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMPNO,ENAME,SAL FROM EMP  WHERE DEPTNO=20 ORDER BY SAL ASC;
</code></pre>
<p>2.查询员工编号、姓名、薪资、部门编号，按部门升序及薪资降序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMPNO,ENAME,SAL,DEPTNO FROM EMP ORDER BY DEPTNO ASC ,SAL DESC;
</code></pre>
<p>3.查询除20号部门外，员工编号、姓名、薪资、部门编号，按部门升序、薪资升序、工号降序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMPNO,ENAME ,SAL,DEPTNO FROM EMP WHERE DEPTNO <>20 ORDER BY DEPTNO ASC,SAL ASC, EMPNO DESC;
</code></pre>
<p>4.查询员工姓名、薪资、佣金、薪资佣金合计，按薪资佣金合计值升序排列，薪资佣金以“总计” 二字显示</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME ,SAL,COMM,NVL(SAL,0)+NVL(COMM,0) AS 总计 FROM EMP ORDER BY 总计 ASC;
</code></pre>
<p>5.查询员工姓名、岗位、薪资，按岗位升序排列，其中岗位PRESIDENT排在最前</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME, JOB, SAL FROM EMP ORDER BY CASE WHEN JOB = 'PRESIDENT' THEN 1 ELSE 2 END ASC,JOB ASC;
</code></pre>
<p>6.查询员工姓名、薪资、12个月工资（以“年薪”二字展示），按年薪降序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME ,SAL ,SAL*12 AS 年薪 FROM EMP ORDER BY 年薪 DESC;
</code></pre>
<p>7.给每个员工奖金加100，然后按照增加后的奖金降序排序 </p>
<pre class=" language-shell"><code class="language-shell">SELECT NVL(COMM,0)+100 奖金 FROM EMP ORDER BY 奖金 DESC;
</code></pre>
<p>8.年终时：有佣金的员工佣金翻倍，无佣金的员工获得薪资的10%作为佣金奖励，</p>
<p>现查询员工姓名，薪资、佣金调整信息，按员工编号升序排列，其中调整信息包括：</p>
<p>有佣金的以：“原佣金为：，调整后佣金为：”格式展示<br>无佣金的以：“新增佣金：”格式展示</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,SAL,CASE
         WHEN COMM IS NOT NULL THEN
          ('原佣金为:' || COMM || '调整后佣金为：' || COMM * 2)
         WHEN COMM IS NULL THEN
          ('新增佣金：' || SAL * 0.1)
        END 调整信息
  FROM EMP;
</code></pre>
<p>9.统计员工姓名及员工资历，并按资历排序，将老员工排在前，新员工排在后<br> （老员工：80年及以前  ；新员工：81年及以后）  </p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME ,CASE WHEN
HIREDATE < TO_DATE('19800101','YYYYMMDD') THEN '老员工'
ELSE '新员工'
END 员工资历
FROM EMP 
ORDER BY HIREDATE ASC;
</code></pre>
<p>10.查询员工姓名、岗位、薪资及岗位类型，并对岗位类型按（管-行-技-销）顺序排序，岗位类型相同<br>的按薪资降序排列（行政岗：办事员 ；管理岗：经理/总经理；技术岗：分析师；销售岗：销售）</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP;
SELECT ENAME ,JOB ,SAL ,CASE 
                WHEN JOB = 'MANAGER'OR JOB='PRESIDENT' THEN '管理岗'
                WHEN JOB = 'CLERK' THEN '行政岗' 
                WHEN JOB = 'ANALYST' THEN '技术岗'
                WHEN JOB = 'SALESMAN' THEN '销售岗'
                END 岗位类型
                FROM EMP
                ORDER BY CASE 
                WHEN JOB = 'MANAGER'OR JOB='PRESIDENT' THEN '1'
                WHEN JOB = 'CLERK' THEN '2' 
                WHEN JOB = 'ANALYST' THEN '3'
                WHEN JOB = 'SALESMAN' THEN '4' 
                END ASC, SAL DESC;
</code></pre>
<p>11.查询员工姓名，员工薪资，薪资等级（1000以下为低级，1000-3000为中级，3000以上为高级）</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME ,SAL,CASE 
                    WHEN SAL<1000 THEN '低级'
                    WHEN SAL BETWEEN 1000 AND 3000 THEN '中级'
                    WHEN SAL>3000 THEN '高级'
            FROM EMP;
</code></pre>
<p>12.查询20号部门员工的姓名、岗位、薪资、奖金（奖金为空的处理成0），并以薪资奖金的合计值进行降序排列，合计值相同的按员工编号升序排列</p>
<pre class=" language-shell"><code class="language-shell">SELECT ENAME,JOB,SAL,NVL(COMM,0) FROM EMP ORDER BY NVL(SAL,0)+NVL(COMM,0) DESC , EMPNO ASC;
</code></pre>
<p>13.查询emp表,要求结果按照工资降序排列(剔除工资为空的);</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP WHERE SAL IS NOT NULL ORDER BY SAL DESC;
</code></pre>
<p>14.按员工岗位降序排列，经理排在第一位;</p>
<pre class=" language-shell"><code class="language-shell">SELECT * FROM EMP ORDER BY CASE WHEN JOB='PRESIDENT'THEN 1 ELSE 2 END ASC , JOB ASC;
</code></pre>
<p>15.按员工岗位升序排列且除经理外其他工种小写，经理排在第一位;</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMP.*,CASE 
              WHEN JOB='MANAGER 'THEN UPPER(ENAME) 
              ELSE LOWER(ENAME) 
              END JOB 
              FROM EMP 
              ORDER BY 
              CASE WHEN JOB='MANAGER'THEN 1 
              ELSE 2 
              END ASC , JOB ASC;
</code></pre>
<p>16.查找员工信息要求岗位除经理外其他工种小写，按员工岗位降序排列且经理排在第一位;</p>
<pre class=" language-shell"><code class="language-shell">SELECT EMP.*,CASE 
WHEN JOB='MANAGER 'THEN UPPER(ENAME) ELSE LOWER(ENAME) END JOB FROM EMP 
ORDER BY CASE WHEN 
JOB='MANAGER'THEN 1 ELSE 2 END ASC , JOB DESC;
</code></pre>
<p>17.查询每个员工的姓名、岗位，以及以下列CLERK_SAL,MANAGER_SAL,PRESIDENT_SAL,ANALYST_SAL,SALESMAN_SAL,<br>每个人在自己所属的岗位下有对应的薪资信息，其他字段显示为0</p>
<p>例：SCOTT  ANALYST 0  0  0  3000  0*/</p>
<pre class=" language-shell"><code class="language-shell">SELECT *FROM EMP ;
SELECT ENAME,CASE WHEN JOB='CLERK' THEN JOB ELSE TO_CHAR(0) END AS CLERK_SAL,
CASE WHEN JOB='MANAGER' THEN JOB ELSE TO_CHAR(0) END AS MANAGER_SAL,
CASE WHEN JOB='PRESIDENT' THEN JOB ELSE TO_CHAR(0) END AS PRESIDENT_SAL,
CASE WHEN JOB='ANALYST' THEN JOB ELSE TO_CHAR(0) END AS ANALYST_SA,
CASE WHEN JOB='SALESMAN' THEN JOB ELSE TO_CHAR(0) END AS SALESMAN_SAL,SAL
FROM EMP;
</code></pre>
<h2 id="💢💢💢💢💢💢💢💢💢💢"><a href="#💢💢💢💢💢💢💢💢💢💢" class="headerlink" title="💢💢💢💢💢💢💢💢💢💢"></a>💢💢💢💢💢💢💢💢💢💢</h2>
                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">刘展</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://codeliuzhan.cn/2021/04/20/oracle-di-san-tian/">http://codeliuzhan.cn/2021/04/20/oracle-di-san-tian/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">刘展</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/">
                                    <span class="chip bg-color">大数据第一阶段</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/04/21/di-si-tian/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="Oracle第四天">
                        
                        <span class="card-title">Oracle第四天</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-04-21
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="post-category">
                                    大数据
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/">
                        <span class="chip bg-color">大数据第一阶段</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/04/19/oracle-di-er-tian/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="Oracle第二天">
                        
                        <span class="card-title">Oracle第二天</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-04-19
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="post-category">
                                    大数据
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/">
                        <span class="chip bg-color">大数据第一阶段</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Blog From Liuzhan<br />'
            + '文章作者: 刘展<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2021</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">刘展</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">128.8k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2019";
                    var startMonth = "6";
                    var startDate = "28";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
            <span id="icp"><img src="/medias/icp.png" style="vertical-align: text-bottom;" />
                <a href="http://beian.miit.gov.cn/state/outPortal/loginPortal.action" target="_blank">鲁ICP备20029325号</a>
            </span>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/codeliuzhan" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:liuzhan1999@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1985730401" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1985730401" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    
    <script>
        (function (i, s, o, g, r, a, m) {
            i["DaoVoiceObject"] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            a.charset = "utf-8";
            m.parentNode.insertBefore(a, m)
        })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') +
            "//widget.daovoice.io/widget/6984b559.js", "daovoice")
        daovoice('init', {
            app_id: "6655edc5"
        });
        daovoice('update');
    </script>
    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
